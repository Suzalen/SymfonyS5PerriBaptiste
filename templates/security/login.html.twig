<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Connexion !{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
        {% block stylesheets %}
            {{ importmap('app') }}
            <link rel="stylesheet" href="{{ asset('css/app.css') }}">
        {% endblock %}

        {% block javascripts %}
            {{ importmap('app') }}
        {% endblock %}
    </head>
    <body class="bg-gradient-to-r from-cyan-500 to-blue-500 h-screen flex items-center justify-center">
        <div class="w-full max-w-md bg-white rounded-xl shadow-2xl overflow-hidden transform hover:scale-105 transition-transform duration-300">
            <div class="bg-gray-800 p-6 text-center">
                <h1 class="text-3xl font-bold text-white">Backoffice</h1>
                <p class="text-gray-400 text-sm mt-1">Veuillez vous connecter pour continuer</p>
            </div>
            
            <div class="p-8">
                <form method="post">
                    {% if error %}
                        <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded" role="alert">
                            <p class="font-bold">Erreur</p>
                            <p>{{ error.messageKey|trans(error.messageData, 'security') }}</p>
                        </div>
                    {% endif %}

                    {% if app.user %}
                        <div class="mb-4 text-sm text-gray-600 text-center">
                            Vous êtes connecté en tant que <span class="font-bold">{{ app.user.userIdentifier }}</span>. <br>
                            <a href="{{ path('app_logout') }}" class="text-blue-500 hover:text-blue-700 underline">Déconnexion</a>
                        </div>
                    {% endif %}

                    <div class="mb-6">
                        <label for="username" class="block text-gray-700 text-sm font-bold mb-2 uppercase tracking-wide">Email</label>
                        <input type="email" value="{{ last_username }}" name="_username" id="username" class="appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" placeholder="admin@example.com" autocomplete="email" required autofocus>
                    </div>

                    <div class="mb-8">
                        <label for="password" class="block text-gray-700 text-sm font-bold mb-2 uppercase tracking-wide">Mot de passe</label>
                        <input type="password" name="_password" id="password" class="appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition" placeholder="••••••••" autocomplete="current-password" required>
                    </div>

                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

                    <div class="flex items-center justify-between">
                        <button type="submit" class="bg-gradient-to-r from-blue-600 to-blue-800 hover:from-blue-700 hover:to-blue-900 text-white font-bold py-3 px-4 rounded w-full focus:outline-none focus:shadow-outline transform active:scale-95 transition">
                            Se connecter
                        </button>
                    </div>
                </form>
            </div>
            <div class="bg-gray-100 p-4 text-center text-xs text-gray-500 border-t">
                &copy; {{ 'now'|date('Y') }} Ma Société. Tous droits réservés.
            </div>
        </div>
    </body>
</html>
